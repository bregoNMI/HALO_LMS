{% extends 'base.html' %}
{% load static %}
{% load custom_filters %}
{% block content %}
    <div id="stickyNavBar">
        <div class="details-top-row max-width-extend-1">
            <div class="details-top-row-left">
                <button type="button" onclick="handleBackButton()" class="back-btn dynamic-back-btn">
                    <i class="fa-solid fa-arrow-left"></i>
                </button>
                <h3> Edit Online Course </h3>
            </div>
            <div class="details-top-row-right">
                <!-- <div class="option-btn-row">
                    <div class="option-btn">
                        <i class="fa-regular fa-clock-rotate-left"></i>
                        <span> View History </span>
                    </div>
                </div> -->
                <button type="button" onclick="generateCourseData('save')" class="option-btn course-save-btns">
                    <i class="fa-regular fa-floppy-disk"></i>
                    <span> Save </span>
                </button>
                <button type="button" onclick="generateCourseData()" class="action-button-primary course-save-btns">
                    <i class="fa-regular fa-paper-plane"></i>
                    <span>Publish</span>
                </button>
            </div>
        </div>
    </div>
    <div class="admin-body align-center">
        {% include 'messageContainer/message_container.html' %}
        <div class="max-width-extend-1">
            <div id="mainNavBar" class="details-top-row">
                <div class="details-top-row-left">
                    <button type="button" onclick="handleBackButton()" class="back-btn dynamic-back-btn">
                        <i class="fa-solid fa-arrow-left"></i>
                    </button>
                    <h3> Edit Online Course </h3>
                </div>
                <div class="details-top-row-right">
                    <!-- <div class="option-btn-row">
                        <div class="option-btn">
                            <i class="fa-regular fa-clock-rotate-left"></i>
                            <span> View History </span>
                        </div>
                    </div> -->
                    <button onclick="generateCourseData('save')" class="option-btn course-save-btns">
                        <i class="fa-regular fa-floppy-disk"></i>
                        <span> Save </span>
                    </button>
                    <button onclick="generateCourseData()" class="action-button-primary course-save-btns">
                        <i class="fa-regular fa-paper-plane"></i>
                        <span>Publish</span>
                    </button>
                </div>
            </div>
            <!-- Beginning of option sections -->
            <div class="course-content-container">
                <!-- Left Column -->
                <div class="course-content-left-column">
                    <div class="details-info-card">
                        <div class="info-card-header collapsable-header">
                            <div class="card-header-left">
                                <i class="fa-regular fa-house"></i>
                                <span> General </span>
                            </div>
                            <div class="card-header-right">
                                <i class="fa-regular fa-angle-down"></i>
                            </div>
                        </div>
                        <div class="info-card-body">
                            <!-- Hidden Field to store the course ID -->
                            <input id="courseId" type="hidden" value="{{ course.id }}">
                            <div class="course-content-input">
                                <label class="edit-user-label" for="title">Course Title<span class="required-asterisk">*</span></label>
                                <input type="text" id="title" name="title" placeholder="Course Title" value="{{ course.title }}">
                            </div>
                            <div class="course-content-input">
                                <label class="edit-user-label" for="description">Course Description</label>
                                <div class="editor-container scrollable-content-inner" id="courseDescription">{{ course.description|safe }}</div>
                                <div class="quill-character-counter">
                                    <div class="quill-current-counter">0</div>
                                    <span>/</span>
                                    <div class="quill-max-counter">5000</div>
                                </div>
                            </div>
                            <div class="course-content-input course-content-row">
                                <div class="edit-user-input">
                                    <label class="edit-user-label" for="status">Status</label>
                                    <div class="custom-select margin-0">
                                        <i class="fa-light fa-angles-up-down"></i>     
                                        <input class="select-selected" type="text" id="status" name="status" readonly="" value="{{ course.status }}">
                                        <div class="select-items scrollable-content" style="display: none;">
                                            <div class="select-item" data-name="status" data-value="Active">Active</div>
                                            <div class="select-item" data-name="status" data-value="Inactive">Inactive</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="edit-user-input">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <label class="edit-user-label" for="category">Category</label>
                                        <span style="display: flex;" onclick="openPopup('createCategory')" class="create-category-icon tooltip" data-tooltip="Create New Category">
                                            <span class="tooltiptext">Create New Category</span>
                                            <i class="fa-solid fa-plus"></i>
                                        </span>
                                    </div>                           
                                    <div id="selectedCategories">
                                        <div class="right-column-file-wrapper">
                                            <div id="userDropdown2" class="category-dropdown course-content-input">
                                                {% if course.category %}
                                                    <input type="text" id="category" name="category" class="categorySearch" placeholder="Search categories..." value="{{ course.category.name }}" autocomplete="off" data-id="{{ course.category.id }}">
                                                {% else %}
                                                    <input type="text" id="category" name="category" class="categorySearch" placeholder="Search categories..." autocomplete="off">
                                                {% endif %}
                                                <i class="fa-regular fa-magnifying-glass search-icon"></i>
                                                <div class="categoryList scrollable-content-inner">
                                                    <div class="loadingIndicator" style="display:none;">Loading...</div>
                                                </div>
                                                <div class="dropdown-clear-input">
                                                    <i class="fa-solid fa-xmark"></i>
                                                </div>
                                            </div>
                                        </div>
                                    </div>                 
                                </div>
                            </div>      
                        </div>
                    </div>
                    <!-- Syllabus -->
                    <div class="details-info-card">
                        <div class="info-card-header collapsable-header">
                            <div class="card-header-left">
                                <i class="fa-regular fa-newspaper"></i>
                                <span> Syllabus </span>
                            </div>
                            <div class="card-header-right">
                                <i class="fa-regular fa-angle-down"></i>
                            </div>
                        </div>
                        <div class="info-card-body">
                            <div class="course-content-input">
                                <label class="edit-user-label">Must Complete</label>
                                <div class="content-input-options-row">
                                    <label class="custom-radio">
                                        <input type="radio" name="must_complete" value="any_order" {% if not course.locked %}checked{% endif %}>
                                        <span class="custom-radio-button"></span>
                                        All lessons, in any order
                                    </label>
                                    <label class="custom-radio">
                                        <input type="radio" name="must_complete" value="in_order" {% if course.locked %}checked{% endif %}>
                                        <span class="custom-radio-button"></span>
                                        All lessons, in order by chapter
                                    </label>
                                </div>                               
                            </div>
                            <div class="course-content-input course-content-row" style="flex-wrap: wrap;">
                                <div class="edit-user-input" style="flex: 1 1 35%;">
                                    <label class="edit-user-label" for="terms">Terms & Conditions</label>
                                    <label class="toggle-switch">
                                        {% if course.terms_and_conditions %}
                                            <input type="checkbox" id="terms" name="terms" checked>
                                        {% else %}
                                            <input type="checkbox" id="terms" name="terms">
                                        {% endif %}
                                        <div class="toggle-switch-background">
                                        <div class="toggle-switch-handle"></div>
                                        </div>
                                    </label>
                                    <span class="course-content-input-subtext"> Learners must accept Terms & Conditions to gain access to the course.</span>
                                </div>
                                <div class="edit-user-input" style="flex: 1 1 35%;">
                                    <label class="edit-user-label">Completion Time</label>
                                    <div style="display: flex; gap: 1rem;">
                                        <div class="edit-user-input" style="max-width: 13.6rem;">
                                            <input type="number" id="completion_hours" name="completion_hours" class="icon-field form-control" placeholder="Hours" min="0" value="{{ hours }}">
                                            <span class="input-group-addon">
                                                <i class="fa-regular fa-hourglass"></i>
                                            </span>
                                        </div>
                                        <div class="edit-user-input" style="max-width: 13.6rem;">
                                            <input type="number" id="completion_seconds" name="completion_seconds" class="icon-field form-control" placeholder="Minutes" min="0" max="60" value="{{ minutes }}">
                                            <span class="input-group-addon">
                                                <i class="fa-regular fa-watch"></i>
                                            </span>
                                        </div>
                                    </div>
                                    
                                    <span class="course-content-input-subtext"> Provide an estimated completion time for the course.</span>
                                </div>
                            </div>  
                        </div>
                    </div>
                    <!-- Course Content -->
                    <div class="details-info-card">
                        <div class="info-card-header collapsable-header">
                            <div class="card-header-left">
                                <i class="fa-regular fa-book-open-cover"></i>
                                <span> Course Content </span>
                            </div>
                            <div class="card-header-right">
                                <i class="fa-regular fa-angle-down"></i>
                            </div>
                        </div>
                        <div class="info-card-body">
                            <!-- List of current Modules -->
                            <div class="course-module-container">
                                <!-- Individual Module -->
                                <div id="moduleContainer" class="module-container">
                                    {% for module in course.modules.all %}
                                        <div class="module-card" data-id="{{ module.id }}">
                                            <div class="info-card-header collapsable-header">
                                                <div class="card-header-left">
                                                    <i class="fa-thin fa-grip-dots-vertical module-drag-icon"></i>
                                                    <input class="module-title" type="text" placeholder="New Module" value="{{ module.title }}">
                                                </div>
                                                <div class="module-header-right">
                                                    <div onclick="openPopup('moduleDeleteConfirmation', 'deleteModule', this)" id="deleteModule" class="module-delete tooltip" data-tooltip="Delete Module">
                                                        <span class="tooltiptext">Delete Module</span>
                                                        <i class="fa-regular fa-trash-can"></i>
                                                    </div>
                                                    <div class="module-dropdown">
                                                        <i class="fa-regular fa-angle-down"></i>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="module-card-body">
                                                <!-- Lessons -->
                                                <div class="lesson-container">
                                                    {% if module.lessons.all %}
                                                        {% for lesson in module.lessons.all %}
                                                        <div class="lesson-card" data-id="{{ lesson.id }}">
                                                            <!-- Common fields -->
                                                            <input class="lesson-file-name" type="hidden" value="{% if lesson.uploaded_file %}{{ lesson.uploaded_file }}{% else %}Lesson {{ forloop.counter }}: {{ lesson.file.title }}{% endif %}">
                                                            <input class="lesson-type" type="hidden" value="{{ lesson.content_type }}">
                                                            <input class="lesson-file" type="hidden" value="{% if lesson.uploaded_file %}{{ lesson.uploaded_file.id }}{% else %}{{ lesson.file.file.url }}{% endif %}">
                                                            <input class="lesson-description" type="hidden" value="{{ lesson.description|safe }}">
                                                        
                                                            {% if lesson.content_type == "quiz" %}
                                                                <!-- Quiz source fields -->
                                                                <input class="lesson-create-quiz-from" type="hidden" value="{{ lesson.create_quiz_from }}">
                                                                <input class="lesson-quiz-template-id" type="hidden" value="{{ lesson.quiz_template_id }}">
                                                                <input class="lesson-selected-quiz-template-name" type="hidden" value="{{ lesson.selected_quiz_template_name }}">
                                                                <input class="lesson-quiz-id" type="hidden" value="{{ lesson.quiz_id }}">
                                                                <input class="lesson-selected-quiz-name" type="hidden" value="{{ lesson.selected_quiz_name }}">
                                                        
                                                                {% if lesson.quiz_config %}
                                                                    <!-- QuizConfig settings -->
                                                                    <input class="lesson-quiz-type" type="hidden" value="{{ lesson.quiz_config.quiz_type }}">
                                                                    <input class="lesson-quiz-passing-score" type="hidden" value="{{ lesson.quiz_config.passing_score }}">
                                                                    <input class="lesson-quiz-require-passing" type="hidden" value="{{ lesson.quiz_config.require_passing|yesno:'true,false' }}">
                                                                    <input class="lesson-quiz-duration" type="hidden" value="{{ lesson.quiz_config.quiz_duration }}">
                                                                    <input class="lesson-quiz-attempts" type="hidden" value="{{ lesson.quiz_config.quiz_attempts }}">
                                                                    <input class="lesson-quiz-maximum-warnings" type="hidden" value="{{ lesson.quiz_config.maximum_warnings }}">
                                                                    <input class="lesson-quiz-randomize-order" type="hidden" value="{{ lesson.quiz_config.randomize_order|yesno:'true,false' }}">
                                                                    <input class="lesson-quiz-reveal-answers" type="hidden" value="{{ lesson.quiz_config.reveal_answers|yesno:'true,false' }}">
                                                                {% endif %}
                                                            {% endif %}
                                                        
                                                            <div class="lesson-header-left">
                                                                <i class="fa-thin fa-grip-dots-vertical lesson-drag-icon"></i>
                                                                <span class="lesson-title">Lesson {{ forloop.counter }}: {{ lesson.title }}</span>
                                                            </div>
                                                            <div class="lesson-header-right">
                                                                <div class="lesson-edit tooltip" data-tooltip="Edit Lesson">
                                                                    <span class="tooltiptext">Edit Lesson</span>
                                                                    <i class="fa-regular fa-pencil"></i>
                                                                </div>
                                                                <div class="lesson-delete tooltip" data-tooltip="Delete Lesson">
                                                                    <span class="tooltiptext">Delete Lesson</span>
                                                                    <i class="fa-regular fa-trash-can"></i>
                                                                </div>
                                                            </div>
                                                        </div>                                                        
                                                        {% endfor %}
                                                    {% else %}
                                                        <div class="no-lessons-container"><span>This Module currently has no lessons.</span></div>
                                                    {% endif %}
                                                </div>
                                                <div onclick="openPopup('lessonSelectionPopup', 'createLesson', this)" id="addLesson" class="secondary-add-btn">
                                                    <i class="fa-regular fa-plus"></i>
                                                    <span> Add Lesson </span>
                                                </div>
                                            </div>
                                        </div>
                                    {% endfor %}
                                </div>

                                <div id="noModulesCreated">
                                    <img class="course-graphic" src="{% static 'client_admin\Images\HALO LMS No Graphic Test-27.png' %}" alt="HALO Graphic">   
                                    <h4>No Modules created</h4>
                                    <span>Add a module to your course content to start creating your masterpiece</span>
                                </div>
                            </div>    
                            <div id="addModule" class="main-add-btn">
                                <i class="fa-regular fa-plus"></i>
                                <span> Add Module </span>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Right Column -->
                <div class="course-content-right-column">
                    <!-- Credentials -->
                    <div class="details-info-card">
                        <div class="info-card-header collapsable-header">
                            <div class="card-header-left">
                                <!-- <i class="fa-regular fa-book-sparkles"></i> -->
                                <i class="fa-regular fa-ranking-star"></i>
                                <span> Credentials </span>
                            </div>
                            <div class="card-header-right">
                                <i class="fa-regular fa-angle-down"></i>
                            </div>
                        </div>
                        <div class="info-card-body right-column-card-body">
                            <div class="course-content-input">
                                <label class="edit-user-label" for="certificate">Certificate</label>
                                <label class="toggle-switch">
                                    {% if certificate_credential %}
                                        <input class="toggle-option" type="checkbox" id="certificate" name="certificate" checked>
                                    {% else %}
                                        <input class="toggle-option" type="checkbox" id="certificate" name="certificate">
                                    {% endif %}
                                    <div class="toggle-switch-background">
                                      <div class="toggle-switch-handle"></div>
                                    </div>
                                </label>
                                <span class="course-content-input-subtext"> Learners receive certificate upon course completion. </span>
                            </div>
                            <!-- Certificate -->
                            <div class="toggle-option-details">
                                <div class="right-column-file-wrapper">
                                    <h5 class="right-column-option-header">Certificate Source</h5>
                                    <div onclick="openFileLibrary('certificateSource')" for="certificateSource" class="custom-file-upload-container">
                                        <div class="custom-file-upload">
                                            <input type="file" id="certificateSource" name="certificateSource" style="display: none;" readonly="">
                                            <i class="fa-regular fa-folder-open"></i> Choose File
                                        </div>
                                        <div class="custom-file-title">
                                            {% if certificate_credential.source_title %}
                                                <span id="certificateSourceDisplay" class="file-name-display">{{ certificate_credential.source_title }}</span>
                                            {% else %}
                                                <span id="certificateSourceDisplay" class="file-name-display">No file selected</span>
                                            {% endif %}
                                        </div>
                                        <!-- This is where the Certificate File Lives -->
                                        {% if certificate_credential.source %}
                                            <input type="hidden" id="certificateURLInput" name="certificateURL" value="{{ certificate_credential.source }}">
                                        {% else %}
                                            <input type="hidden" id="certificateURLInput" name="certificateURL">
                                        {% endif %}
                                    </div>
                                    {% if settings.default_certificate %}
                                        <span class="course-content-input-subtext"> Default certificate will be used if nothing is provided. </span>
                                    {% else %}
                                        <span class="course-content-input-subtext"> HALOÂ°'s default certificate will be used if nothing is provided. You can add your own default certificate from the settings page. </span>
                                    {% endif %}
                                </div>
                                <div class="course-content-input">
                                    <label class="edit-user-label" for="certTitle">Certificate Title</label>
                                    {% if certificate_credential.title %}
                                        <input type="text" id="certTitle" name="certTitle" placeholder="Certificate Title (Optional)" value="{{ certificate_credential.title }}">
                                    {% else %}
                                        <input type="text" id="certTitle" name="certTitle" placeholder="Certificate Title (Optional)">
                                    {% endif %}
                                </div>
                                <!-- Expiration Date -->
                                <div class="course-content-input">
                                    <label class="edit-user-label">Expiration Date</label>
                                    <div class="content-input-options-row">
                                        <label class="custom-radio">
                                            <input class="radio-option" type="radio" name="certificate_expiration_date" value="certificate_expiration_date1" checked="">
                                            <span class="custom-radio-button"></span>
                                            None
                                        </label>
                                        <label class="custom-radio">
                                            {% if certificate_expiration_date.from_enrollment %}
                                                <input class="radio-option" type="radio" name="certificate_expiration_date" data-target="timeFromEnrollmentCertificateDetails" value="certificate_expiration_date2" checked>
                                            {% else %}
                                                <input class="radio-option" type="radio" name="certificate_expiration_date" data-target="timeFromEnrollmentCertificateDetails" value="certificate_expiration_date2">
                                            {% endif %}
                                            <span class="custom-radio-button"></span>
                                            Time From Enrollment
                                        </label>
                                        <label class="custom-radio">
                                            {% if certificate_expiration_date.date %}
                                                <input class="radio-option" type="radio" name="certificate_expiration_date" data-target="selectDateCertificateDetails" value="certificate_expiration_date3" checked>
                                            {% else %}
                                                <input class="radio-option" type="radio" name="certificate_expiration_date" data-target="selectDateCertificateDetails" value="certificate_expiration_date3">
                                            {% endif %}
                                            <span class="custom-radio-button"></span>
                                            Select Date
                                        </label>
                                    </div>
                                </div>
                                <!-- Time From Enrollment -->
                                <div id="timeFromEnrollmentCertificateDetails" class="toggle-option-details">
                                    <div class="right-column-file-wrapper">
                                        <div class="edit-user-input">
                                            <label class="edit-user-label" for="certificate_expiration_date">Certificate Expires In</label>
                                            <div class="date-options-container">
                                                <div class="edit-user-input">
                                                    <input type="number" id="certificate_expiration_year" name="certificate_expiration_year" class="icon-field form-control" placeholder="Years" min="0" value="{{ certificate_expiration_date.from_enrollment.years }}">
                                                    <span class="input-group-addon">
                                                        <i class="fa-regular fa-calendar"></i>
                                                    </span>
                                                </div>
                                                <div class="edit-user-input">
                                                    <input type="number" id="certificate_expiration_months" name="certificate_expiration_months" class="icon-field form-control" placeholder="Months" min="0" value="{{ certificate_expiration_date.from_enrollment.months }}">
                                                    <span class="input-group-addon">
                                                        <i class="fa-regular fa-calendar-week"></i>
                                                    </span>
                                                </div>
                                                <div class="edit-user-input">
                                                    <input type="number" id="certificate_expiration_days" name="certificate_expiration_days" class="icon-field form-control" placeholder="Days" min="0" value="{{ certificate_expiration_date.from_enrollment.days }}">
                                                    <span class="input-group-addon">
                                                        <i class="fa-regular fa-calendar-day"></i>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Select Date -->
                                <div id="selectDateCertificateDetails" class="toggle-option-details">
                                    <div class="right-column-file-wrapper">
                                        <div class="edit-user-input">
                                            <label class="edit-user-label" for="certificate_expiration_date">Certificate Expires On</label>
                                            <div class="date-options-container">
                                                <div class="edit-user-input">
                                                    <input type="text" id="certificate_expires_on_date" name="certificate_expires_on_date" class="date-picker" placeholder="Select Date" value="{{ certificate_expiration_date.date|date:'Y-m-d' }}">
                                                    <span class="input-group-addon">
                                                        <i class="fa-regular fa-calendar-lines"></i>
                                                    </span>
                                                </div>
                                                <div class="edit-user-input">
                                                    <input type="text" id="certificate_expires_on_time" name="certificate_expires_on_time" class="time-picker" placeholder="Select Time (Optional)" value="{{ certificate_expiration_date.time|time:"H:i:s" }}">
                                                    <span class="input-group-addon">
                                                        <i class="fa-regular fa-clock"></i>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>       
                        </div>
                    </div>
                    <!-- Course Credits (future) -->
                    <!-- Event Dates -->
                    <div class="details-info-card">
                        <div class="info-card-header collapsable-header">
                            <div class="card-header-left">
                                <i class="fa-regular fa-alarm-clock"></i>
                                <span> Event Dates </span>
                            </div>
                            <div class="card-header-right">
                                <i class="fa-regular fa-angle-down"></i>
                            </div>
                        </div>
                        <!-- Start Date -->
                        <div class="info-card-body right-column-card-body">
                            <!-- Start Date -->
                            <div class="course-content-input">
                                <label class="edit-user-label">Start Date</label>
                                <div class="content-input-options-row">
                                    <label class="custom-radio">
                                        <input class="radio-option" type="radio" name="start_date" value="start_date1" checked="">
                                        <span class="custom-radio-button"></span>
                                        None
                                    </label>
                                    <label class="custom-radio">
                                        {% if start_date %}
                                            <input class="show-option-details radio-option" data-target="startDateDetails" type="radio" name="start_date" value="start_date2" checked>
                                        {% else %}
                                            <input class="show-option-details radio-option" data-target="startDateDetails" type="radio" name="start_date" value="start_date2">
                                        {% endif %}
                                        
                                        <span class="custom-radio-button"></span>
                                        Select Date
                                    </label>
                                </div>  
                            </div>
                            <div id="startDateDetails" class="toggle-option-details">
                                <div class="right-column-file-wrapper">
                                    <label class="edit-user-label" for="start_date">Start Date</label>
                                    <div class="date-options-container">
                                        <div class="edit-user-input">
                                            <input type="text" id="start_date" name="start_date" class="date-picker" placeholder="Select Date" value="{{ start_date.date|date:'Y-m-d' }}">
                                            <span class="input-group-addon">
                                                <i class="fa-regular fa-calendar-lines"></i>
                                            </span>
                                        </div>
                                        <div class="edit-user-input">
                                            <input type="text" id="start_time" name="start_time" class="time-picker" placeholder="Select Time (Optional)" value="{{ start_date.time|time:"H:i:s" }}">
                                            <span class="input-group-addon">
                                                <i class="fa-regular fa-clock"></i>
                                            </span>
                                        </div>
                                    </div>   
                                </div>
                            </div>      
                            <!-- Expiration Date -->
                            <div class="course-content-input">
                                <label class="edit-user-label">Expiration Date</label>
                                <div class="content-input-options-row">
                                    <label class="custom-radio">
                                        <input class="radio-option" type="radio" name="expiration_date" value="expiration_date1" checked="">
                                        <span class="custom-radio-button"></span>
                                        None
                                    </label>
                                    <label class="custom-radio">
                                        {% if expiration_date.from_enrollment %}
                                            <input class="radio-option" type="radio" name="expiration_date" data-target="timeFromEnrollmentDetails" value="expiration_date2" checked>
                                        {% else %}
                                            <input class="radio-option" type="radio" name="expiration_date" data-target="timeFromEnrollmentDetails" value="expiration_date2">
                                        {% endif %}
                                        <span class="custom-radio-button"></span>
                                        Time From Enrollment
                                    </label>
                                    <label class="custom-radio">
                                        {% if expiration_date.date %}
                                            <input class="radio-option" type="radio" name="expiration_date" data-target="selectDateDetails" value="expiration_date3" checked>
                                        {% else %}
                                            <input class="radio-option" type="radio" name="expiration_date" data-target="selectDateDetails" value="expiration_date3">
                                        {% endif %}
                                        <span class="custom-radio-button"></span>
                                        Select Date
                                    </label>
                                </div>
                            </div>
                            <!-- Time From Enrollment -->
                            <div id="timeFromEnrollmentDetails" class="toggle-option-details">
                                <div class="right-column-file-wrapper">
                                    <div class="edit-user-input">
                                        <label class="edit-user-label" for="expiration_date">Course Expires In</label>
                                        <div class="date-options-container">
                                            <div class="edit-user-input">
                                                <input type="number" id="expiration_year" name="expiration_year" class="icon-field form-control" placeholder="Years" min="0" value="{{ expiration_date.from_enrollment.years }}">
                                                <span class="input-group-addon">
                                                    <i class="fa-regular fa-calendar"></i>
                                                </span>
                                            </div>
                                            <div class="edit-user-input">
                                                <input type="number" id="expiration_months" name="expiration_months" class="icon-field form-control" placeholder="Months" min="0" value="{{ expiration_date.from_enrollment.months }}">
                                                <span class="input-group-addon">
                                                    <i class="fa-regular fa-calendar-week"></i>
                                                </span>
                                            </div>
                                            <div class="edit-user-input">
                                                <input type="number" id="expiration_days" name="expiration_days" class="icon-field form-control" placeholder="Days" min="0" value="{{ expiration_date.from_enrollment.days }}">
                                                <span class="input-group-addon">
                                                    <i class="fa-regular fa-calendar-day"></i>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Select Date -->
                            <div id="selectDateDetails" class="toggle-option-details">
                                <div class="right-column-file-wrapper">
                                    <div class="edit-user-input">
                                        <label class="edit-user-label" for="expiration_date">Course Expires On</label>
                                        <div class="date-options-container">
                                            <div class="edit-user-input">
                                                <input type="text" id="expires_on_date" name="expires_on_date" class="date-picker" placeholder="Select Date" value="{{ expiration_date.date|date:'Y-m-d' }}">
                                                <span class="input-group-addon">
                                                    <i class="fa-regular fa-calendar-lines"></i>
                                                </span>
                                            </div>
                                            <div class="edit-user-input">
                                                <input type="text" id="expires_on_time" name="expires_on_time" class="time-picker" placeholder="Select Time (Optional)" value="{{ expiration_date.time|time:"H:i:s" }}">
                                                <span class="input-group-addon">
                                                    <i class="fa-regular fa-clock"></i>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Due Date -->
                            <div class="course-content-input">
                                <label class="edit-user-label">Due Date</label>
                                <div class="content-input-options-row">
                                    <label class="custom-radio">
                                        <input class="radio-option" type="radio" name="due_date" value="due_date1" checked="">
                                        <span class="custom-radio-button"></span>
                                        None
                                    </label>
                                    <label class="custom-radio">
                                        {% if due_date.from_enrollment %}
                                            <input class="radio-option" type="radio" name="due_date" data-target="timeFromEnrollmentDueDate" value="due_date2" checked>
                                        {% else %}
                                            <input class="radio-option" type="radio" name="due_date" data-target="timeFromEnrollmentDueDate" value="due_date2">
                                        {% endif %}
                                        <span class="custom-radio-button"></span>
                                        Time From Enrollment
                                    </label>
                                    <label class="custom-radio">
                                        {% if due_date.date %}
                                            <input class="radio-option" type="radio" name="due_date" data-target="selectDateDueDate" value="due_date3" checked>
                                        {% else %}
                                            <input class="radio-option" type="radio" name="due_date" data-target="selectDateDueDate" value="due_date3">
                                        {% endif %}
                                        <span class="custom-radio-button"></span>
                                        Select Date
                                    </label>
                                </div>
                            </div>
                            <!-- Time From Enrollment -->
                            <div id="timeFromEnrollmentDueDate" class="toggle-option-details">
                                <div class="right-column-file-wrapper">
                                    <div class="edit-user-input">
                                        <label class="edit-user-label" for="due_date">Course Due In</label>
                                        <div class="date-options-container">
                                            <div class="edit-user-input">
                                                <input type="number" id="due_years" name="due_years" class="icon-field form-control" placeholder="Years" min="0" value="{{ due_date.from_enrollment.years }}">
                                                <span class="input-group-addon">
                                                    <i class="fa-regular fa-calendar"></i>
                                                </span>
                                            </div>
                                            <div class="edit-user-input">
                                                <input type="number" id="due_months" name="due_months" class="icon-field form-control" placeholder="Months" min="0" value="{{ due_date.from_enrollment.months }}">
                                                <span class="input-group-addon">
                                                    <i class="fa-regular fa-calendar-week"></i>
                                                </span>
                                            </div>
                                            <div class="edit-user-input">
                                                <input type="number" id="due_days" name="due_days" class="icon-field form-control" placeholder="Days" min="0" value="{{ due_date.from_enrollment.days }}">
                                                <span class="input-group-addon">
                                                    <i class="fa-regular fa-calendar-day"></i>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Select Date -->
                            <div id="selectDateDueDate" class="toggle-option-details">
                                <div class="right-column-file-wrapper">
                                    <div class="edit-user-input">
                                        <label class="edit-user-label" for="due_date">Course Due On</label>
                                        <div class="date-options-container">
                                            <div class="edit-user-input">
                                                <input type="text" id="due_on_date" name="due_on_date" class="date-picker" placeholder="Select Date" value="{{ due_date.date|date:'Y-m-d' }}">
                                                <span class="input-group-addon">
                                                    <i class="fa-regular fa-calendar-lines"></i>
                                                </span>
                                            </div>
                                            <div class="edit-user-input">
                                                <input type="text" id="due_on_time" name="due_on_time" class="time-picker" placeholder="Select Time (Optional)" value="{{ due_date.time|time:"H:i:s" }}">
                                                <span class="input-group-addon">
                                                    <i class="fa-regular fa-clock"></i>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div> 
                        </div>
                    </div>
                    <!-- Course Media -->
                    <div class="details-info-card">
                        <div class="info-card-header collapsable-header">
                            <div class="card-header-left">
                                <i class="fa-regular fa-image"></i>
                                <span> Media </span>
                            </div>
                            <div class="card-header-right">
                                <i class="fa-regular fa-angle-down"></i>
                            </div>
                        </div>
                        <!-- Course Thumbnail -->
                        <div class="info-card-body right-column-card-body">         
                            <div class="course-thumbnail-wrapper">
                                <div class="label-header-row">
                                    <label class="edit-user-label" for="thumbnail">Course Thumbnail</label>
                                    <div onclick="openFileLibrary('thumbnail')" class="label-action-item">
                                        <i class="fa-regular fa-folder-open"></i>
                                        <span>Choose File</span>
                                    </div>
                                </div>
                                <div class="thumbnail-inner-thumbnail">
                                    <div class="dropzone" id="dropzone">
                                        <i class="fa-regular fa-panorama"></i>
                                        <p>Drag & drop an image here, or click to select one</p>
                                        {% if thumbnail_media.thumbnail_link %}
                                            <input type="file" id="thumbnailFileInput" accept="image/*" style="display: none;" value="{{ thumbnail_media.thumbnail_link }}">
                                        {% elif thumbnail_media.thumbnail_image.url %}
                                            <input type="file" id="thumbnailFileInput" accept="image/*" style="display: none;" value="{{ thumbnail_media.thumbnail_image.url }}">
                                        {% else %}
                                            <input type="file" id="thumbnailFileInput" accept="image/*" style="display: none;">
                                        {% endif %}
                                        <!-- Thumbnail Display -->                           
                                        {% if thumbnail_media.thumbnail_link %}
                                            <div id="imagePreview" class="image-preview" style="display: flex;">
                                                <img src="{{ thumbnail_media.thumbnail_link }}" alt="Course Thumbnail" id="ThumbnailImagePreview">
                                            </div>  
                                        {% elif thumbnail_media.thumbnail_image.url %}
                                            <div id="imagePreview" class="image-preview" style="display: flex;">
                                                <img src="{{ thumbnail_media.thumbnail_image.url }}" alt="Course Thumbnail" id="ThumbnailImagePreview">
                                            </div>    
                                        {% else %}
                                            <div id="imagePreview" class="image-preview">
                                                <img alt="Course Thumbnail" id="ThumbnailImagePreview">
                                            </div>
                                            
                                        {% endif %}
                                    </div>
                                    {% if thumbnail_media.thumbnail_link or thumbnail_media.thumbnail_image.url %}
                                        <input id="thumbnailId" type="hidden" value="{{ thumbnail_media.id }}">
                                        <div id="thumbnailDelete" onclick="openPopup('thumbnailDeleteConfirmation')" style="display: flex; right: 0.5rem;" class="table-filter-item-small thumbnail-delete">
                                            <i class="fa-regular fa-trash-can"></i>
                                        </div>
                                    {% else %}
                                        <div id="thumbnailDelete" onclick="openPopup('thumbnailDeleteConfirmation')" style="display: none; right: 0.5rem;" class="table-filter-item-small thumbnail-delete">
                                            <i class="fa-regular fa-trash-can"></i>
                                        </div>
                                    {% endif %}
                                </div>
                            </div>       
                        </div>
                    </div>
                    <!-- Resources -->
                    <div class="details-info-card">
                        <div class="info-card-header collapsable-header">
                            <div class="card-header-left">
                                <i class="fa-regular fa-cubes"></i>
                                <span> Resources </span>
                            </div>
                            <div class="card-header-right">
                                <i class="fa-regular fa-angle-down"></i>
                            </div>
                        </div>
                        <div class="info-card-body right-column-card-body">
                            <div class="course-content-input">
                                <label class="edit-user-label" for="referenceMaterials">Reference Materials</label>
                                <label class="toggle-switch">
                                    {% if course.referencesEnabled %}
                                        <input class="toggle-option" type="checkbox" id="referenceMaterials" name="referenceMaterials" checked>
                                    {% else %}
                                        <input class="toggle-option" type="checkbox" id="referenceMaterials" name="referenceMaterials">
                                    {% endif %}
                                    <div class="toggle-switch-background">
                                      <div class="toggle-switch-handle"></div>
                                    </div>
                                </label>
                                <span class="course-content-input-subtext"> Files available to Learners during the course. </span>
                            </div>
                            <!-- Reference -->
                            <div class="toggle-option-details">
                                <div id="referenceContainer" class="course-references-container reference-container">
                                    {% if references_resources %}
                                        {% for reference in references_resources %}
                                            <div class="reference-card" id="referenceCard-{{ reference.id }}" data-id="{{ reference.id }}">
                                                <div class="info-card-header collapsable-header">
                                                    <div class="card-header-left">
                                                        <i class="fa-thin fa-grip-dots-vertical reference-drag-icon"></i>
                                                        <input class="reference-title" type="text" placeholder="New Reference" value="{{ reference.title }}">
                                                    </div>
                                                    <div class="reference-header-right">
                                                        <div onclick="openPopup('referenceDeleteConfirmation', 'deleteReference', this)" id="deleteReference" class="reference-delete tooltip" data-tooltip="Delete Reference">
                                                            <span class="tooltiptext">Delete Reference</span>
                                                            <i class="fa-regular fa-trash-can"></i>
                                                        </div>
                                                        <div class="reference-dropdown">
                                                            <i class="fa-regular fa-angle-down"></i>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="reference-card-body">
                                                    <div class="right-column-file-wrapper">
                                                        <h5 class="right-column-option-header">Reference Source <span class="required-asterisk">*</span></h5>
                                                        <div onclick="openFileLibrary('referenceSource', '{{ reference.id }}')" for="referenceSource" class="custom-file-upload-container">
                                                            <div class="custom-file-upload">
                                                                <input type="file" id="referenceSource" name="referenceSource" style="display: none;" readonly="">
                                                                <i class="fa-regular fa-folder-open"></i> Choose File
                                                            </div>
                                                            <div class="custom-file-title">
                                                                <span id="referenceSourceDisplay-{{ reference.id }}" class="file-name-display">{{ reference.file_title }}</span>
                                                            </div>
                                                            <input type="hidden" id="referenceURLInput-{{ reference.id }}" name="referenceURL" value="{{ reference.url }}">
                                                            <input type="hidden" id="referenceTypeInput-{{ reference.id }}" name="referenceType" value="{{ reference.file_type }}">
                                                        </div>
                                                    </div>
                                                    <div class="reference-card-content">
                                                        <label class="edit-user-label" for="referenceDescription-{{ reference.id }}">Reference Description</label>
                                                        <div class="editor-container" id="referenceDescription-{{ reference.id }}"> {{ reference.description|safe }}</div>
                                                        <div class="quill-character-counter">
                                                            <div class="quill-current-counter">0</div>
                                                            <span>/</span>
                                                            <div class="quill-max-counter">2000</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        {% endfor %}
                                    {% else %}
                                        <div class="reference-card" id="referenceCard-1">
                                            <div class="info-card-header collapsable-header">
                                                <div class="card-header-left">
                                                    <i class="fa-thin fa-grip-dots-vertical reference-drag-icon"></i>
                                                    <input class="reference-title" type="text" placeholder="New Reference">
                                                </div>
                                                <div class="reference-header-right">
                                                    <div onclick="openPopup('referenceDeleteConfirmation', 'deleteReference', this)" id="deleteReference" class="reference-delete tooltip" data-tooltip="Delete Reference">
                                                        <span class="tooltiptext">Delete Reference</span>
                                                        <i class="fa-regular fa-trash-can"></i>
                                                    </div>
                                                    <div class="reference-dropdown">
                                                        <i class="fa-regular fa-angle-down"></i>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="reference-card-body">
                                                <div class="right-column-file-wrapper">
                                                    <h5 class="right-column-option-header">Reference Source <span class="required-asterisk">*</span></h5>
                                                    <div onclick="openFileLibrary('referenceSource', '1')" for="referenceSource" class="custom-file-upload-container">
                                                        <div class="custom-file-upload">
                                                            <input type="file" id="referenceSource" name="referenceSource" style="display: none;" readonly="">
                                                            <i class="fa-regular fa-folder-open"></i> Choose File
                                                        </div>
                                                        <div class="custom-file-title">
                                                            <span id="referenceSourceDisplay-1" class="file-name-display">No file selected</span>
                                                        </div>
                                                        <input type="hidden" id="referenceURLInput-1" name="referenceURL">
                                                        <input type="hidden" id="referenceTypeInput-1" name="referenceType">
                                                    </div>
                                                </div>
                                                <div class="reference-card-content">
                                                    <label class="edit-user-label" for="referenceDescription-1">Reference Description</label>
                                                    <div class="editor-container" id="referenceDescription-1"></div>
                                                    <div class="quill-character-counter">
                                                        <div class="quill-current-counter">0</div>
                                                        <span>/</span>
                                                        <div class="quill-max-counter">2000</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    {% endif %}
                                    <div style="display: none;" id="noReferencesCreated" class="no-lessons-container"><span>This Course currently has no references.</span></div>
                                </div>
                                <div id="addReference" class="main-add-btn margin-top-4">
                                    <i class="fa-regular fa-plus"></i>
                                    <span> Add Reference </span>
                                </div>
                            </div>       
                        </div>
                    </div>
                    <!-- Uploads -->
                    <div class="details-info-card">
                        <div class="info-card-header collapsable-header">
                            <div class="card-header-left">
                                <i class="fa-regular fa-cloud-arrow-up"></i>
                                <span> Uploads </span>
                            </div>
                            <div class="card-header-right">
                                <i class="fa-regular fa-angle-down"></i>
                            </div>
                        </div>
                        <div class="info-card-body right-column-card-body">
                            <div id="editUploadInstructionBtn" style="position: absolute; right: 0.8rem; display: none; margin-top: 0; z-index: 1;" onclick="openPopup('editUploadInstructions')" class="label-action-item">
                                <i class="fa-regular fa-pencil"></i>
                                <span>Edit Instructions</span>
                            </div>
                            <div class="course-content-input">
                                <label class="edit-user-label" for="courseUploads">Course Uploads</label>
                                <label class="toggle-switch">
                                    {% if course.uploadsEnabled %}
                                        <input class="toggle-option" type="checkbox" id="courseUploads" name="courseUploads" checked>
                                    {% else %}
                                        <input class="toggle-option" type="checkbox" id="courseUploads" name="courseUploads">
                                    {% endif %}
                                    <div class="toggle-switch-background">
                                      <div class="toggle-switch-handle"></div>
                                    </div>
                                </label>
                                <span class="course-content-input-subtext"> Add sections for Learners to upload course objectives. </span>
                            </div>
                            <!-- Course Uploads -->
                            <div class="toggle-option-details">
                                <div id="uploadContainer" class="course-uploads-container upload-container">
                                    {% if course_uploads %}
                                        {% for upload in course_uploads %}
                                            <div class="upload-card" id="uploadCard-{{ upload.id }}" data-id="{{ upload.id }}">
                                                <div class="info-card-header collapsable-header">
                                                    <div class="card-header-left">
                                                        <i class="fa-thin fa-grip-dots-vertical upload-drag-icon"></i>
                                                        <input class="upload-title" type="text" placeholder="New Upload" value="{{ upload.title }}">
                                                    </div>
                                                    <div class="upload-header-right">
                                                        <div onclick="openPopup('uploadDeleteConfirmation', 'deleteUpload', this)" id="deleteUpload" class="upload-delete tooltip" data-tooltip="Delete Upload">
                                                            <span class="tooltiptext">Delete Upload</span>
                                                            <i class="fa-regular fa-trash-can"></i>
                                                        </div>
                                                        <div class="upload-dropdown">
                                                            <i class="fa-regular fa-angle-down"></i>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="upload-card-body">
                        
                                                    <div class="course-content-input">
                                                        <label class="edit-user-label">Upload Approval</label>
                                                        <div class="content-input-options-row">
                                                            <label class="custom-radio">
                                                                {% if upload.approval_type == 'None' %}
                                                                    <input class="radio-option" type="radio" name="upload_approval{{ upload.id }}" data-target="uploadApprovalNone{{ upload.id }}" value="None" checked="">
                                                                {% else %}
                                                                    <input class="radio-option" type="radio" name="upload_approval{{ upload.id }}" data-target="uploadApprovalNone{{ upload.id }}" value="None">
                                                                {% endif %}
                                                                <span class="custom-radio-button"></span>
                                                                None
                                                            </label>
                                                            <label class="custom-radio">
                                                                {% if upload.approval_type == 'instructor' %}
                                                                    <input class="radio-option" type="radio" name="upload_approval{{ upload.id }}" data-target="uploadApprovalInstructor{{ upload.id }}" value="instructor" checked>
                                                                {% else %}
                                                                    <input class="radio-option" type="radio" name="upload_approval{{ upload.id }}" data-target="uploadApprovalInstructor{{ upload.id }}" value="instructor">
                                                                {% endif %}
                                                                <span class="custom-radio-button"></span>
                                                                Instructor
                                                            </label>
                                                            <label class="custom-radio">
                                                                {% if upload.approval_type == 'admin' %}
                                                                    <input class="radio-option" type="radio" name="upload_approval{{ upload.id }}" data-target="uploadApprovalAdmin{{ upload.id }}" value="admin" checked>
                                                                {% else %}
                                                                    <input class="radio-option" type="radio" name="upload_approval{{ upload.id }}" data-target="uploadApprovalAdmin{{ upload.id }}" value="admin">
                                                                {% endif %}
                                                                <span class="custom-radio-button"></span>
                                                                Admin
                                                            </label>
                                                            <label class="custom-radio">
                                                                {% if upload.approval_type == 'other' %}
                                                                    <input class="radio-option" type="radio" name="upload_approval{{ upload.id }}" data-target="uploadApprovalOther{{ upload.id }}" value="other" checked>
                                                                {% else %}
                                                                    <input class="radio-option" type="radio" name="upload_approval{{ upload.id }}" data-target="uploadApprovalOther{{ upload.id }}" value="other">
                                                                {% endif %}
                                                                <span class="custom-radio-button"></span>
                                                                Other
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <!-- None Approval -->
                                                    <div id="uploadApprovalNone{{ upload.id }}" class="toggle-option-details show-toggle-option-details">
                                                        <span class="course-content-input-subtext"> No approval is required for the course upload. </span>
                                                    </div>
                                                    <!-- Instructor Approval -->
                                                    <div id="uploadApprovalInstructor{{ upload.id }}" class="toggle-option-details">
                                                        <span class="course-content-input-subtext"> An Instructor must approve the course upload. </span>
                                                    </div>
                                                    <!-- Admin Approval -->
                                                    <div id="uploadApprovalAdmin{{ upload.id }}" class="toggle-option-details">
                                                        <span class="course-content-input-subtext"> An Admin must approve the course upload. </span>
                                                    </div>
                                                    <!-- Other Approval -->
                                                    <div id="uploadApprovalOther{{ upload.id }}" class="toggle-option-details">
                                                        <span class="course-content-input-subtext"> Please select the User(s) who will approve the course upload. </span>
                                                        <div class="right-column-file-wrapper">
                                                            <div id="approverDropdown{{ upload.id }}" class="user-dropdown course-content-input">
                                                                <input type="text" class="userSearch" placeholder="Search users...">
                                                                <i class="fa-regular fa-magnifying-glass search-icon"></i>
                                                                <div class="userList scrollable-content-inner"></div>
                                                                <div class="loadingIndicator" style="display:none;">Loading...</div>
                                                                <div class="selectedUsers"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- Initialize the dropdown with selected approvers for this upload -->
                                                    {% if upload.approvers.exists %}
                                                        <script>
                                                            document.addEventListener('DOMContentLoaded', function () {
                                                                let selectedUserIds = [{% for approver in upload.approvers.all %}{{ approver.id }}, {% endfor %}];
                                                                initializeUserDropdown('approverDropdown{{ upload.id }}', selectedUserIds);
                                                            });
                                                        </script>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        {% endfor %}
                                    {% else %}
                                        <div class="upload-card" id="uploadCard-1" data-temp-id="1">
                                            <div class="info-card-header collapsable-header">
                                                <div class="card-header-left">
                                                    <i class="fa-thin fa-grip-dots-vertical upload-drag-icon"></i>
                                                    <input class="upload-title" type="text" placeholder="New Upload">
                                                </div>
                                                <div class="upload-header-right">
                                                    <div onclick="openPopup('uploadDeleteConfirmation', 'deleteUpload', this)" id="deleteUpload" class="upload-delete tooltip" data-tooltip="Delete Upload">
                                                        <span class="tooltiptext">Delete Upload</span>
                                                        <i class="fa-regular fa-trash-can"></i>
                                                    </div>
                                                    <div class="upload-dropdown">
                                                        <i class="fa-regular fa-angle-down"></i>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="upload-card-body">
                    
                                                <div class="course-content-input">
                                                    <label class="edit-user-label">Upload Approval</label>
                                                    <div class="content-input-options-row">
                                                        <label class="custom-radio">
                                                            <input class="radio-option" type="radio" name="upload_approval1" data-target="uploadApprovalNone" value="None" checked="">
                                                            <span class="custom-radio-button"></span>
                                                            None
                                                        </label>
                                                        <label class="custom-radio">
                                                            <input class="radio-option" type="radio" name="upload_approval1" data-target="uploadApprovalInstructor" value="instructor">
                                                            <span class="custom-radio-button"></span>
                                                            Instructor
                                                        </label>
                                                        <label class="custom-radio">
                                                            <input class="radio-option" type="radio" name="upload_approval1" data-target="uploadApprovalAdmin" value="admin">
                                                            <span class="custom-radio-button"></span>
                                                            Admin
                                                        </label>
                                                        <label class="custom-radio">
                                                            <input class="radio-option" type="radio" name="upload_approval1" data-target="uploadApprovalOther" value="other">
                                                            <span class="custom-radio-button"></span>
                                                            Other
                                                        </label>
                                                    </div>
                                                </div>
                                                <!-- None Approval -->
                                                <div id="uploadApprovalNone" class="toggle-option-details show-toggle-option-details">
                                                    <span class="course-content-input-subtext"> No approval is required for the course upload. </span>
                                                </div>
                                                <!-- Instructor Approval -->
                                                <div id="uploadApprovalInstructor" class="toggle-option-details">
                                                    <span class="course-content-input-subtext"> An Instructor must approve the course upload. </span>
                                                </div>
                                                <!-- Admin Approval -->
                                                <div id="uploadApprovalAdmin" class="toggle-option-details">
                                                    <span class="course-content-input-subtext"> An Admin must approve the course upload. </span>
                                                </div>
                                                <!-- Other Approval -->
                                                <div id="uploadApprovalOther" class="toggle-option-details">
                                                    <span class="course-content-input-subtext"> Please select the User(s) who will approve the course upload. </span>
                                                    <div class="right-column-file-wrapper">
                                                        <div id="userDropdown1" class="user-dropdown course-content-input">
                                                            <input type="text" class="userSearch" placeholder="Search users...">
                                                            <i class="fa-regular fa-magnifying-glass search-icon"></i>
                                                            <div class="userList scrollable-content-inner"></div>
                                                            <div class="loadingIndicator" style="display:none;">Loading...</div>
                                                            <div class="selectedUsers"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    {% endif %}
                                    <div style="display: none;" id="noUploadsCreated" class="no-lessons-container"><span>This Course currently has no uploads.</span></div>
                                </div>
                                <div id="addUpload" class="main-add-btn margin-top-4">
                                    <i class="fa-regular fa-plus"></i>
                                    <span> Add Upload </span>
                                </div>
                            </div>       
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% include 'popups/create_category.html' %}
    {% include 'popups/edit_upload_instructions.html' %}
    {% include 'popups/file_library.html' %}
    {% include 'popups/create_new_lesson.html' %}
    {% include 'popups/create_scorm1.2_lesson.html' %}
    {% include 'popups/create_scorm2004_lesson.html' %}
    {% include 'popups/create_quiz_lesson.html' %}
    {% include 'popups/quiz_settings_popup.html' %}
    {% include 'popups/module_delete_confirmation.html' %}
    {% include 'popups/reference_delete_confirmation.html' %}
    {% include 'popups/lesson_delete_confirmation.html' %}
    {% include 'popups/upload_delete_confirmation.html' %}
    {% include 'popups/thumbnail_delete_confirmation.html' %}
    {% include 'popups/edit_lesson.html' %}
    {% include 'popups/select_lesson_type.html' %}
    <script src="{% static 'client_admin\javascript\user_details.js' %}"></script>
    <link rel="stylesheet" href="{% static 'content\css\content.css' %}">
    <link rel="stylesheet" href="{% static 'client_admin\css\user_details.css' %}">
    <script src="{% static 'client_admin\javascript\custom_select.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.14.0/Sortable.min.js"></script>
    <script src="{% static 'content\javascript\content.js' %}"></script>
    <script src="{% static 'client_admin\javascript\ajax_search_options.js' %}"></script>
    <script>const course_category_id = {{ course.category.id }};</script>
{% endblock content %}